\chapter[Desenvolvimento]{Desenvolvimento}

\section{Funcionamento do Sistema}

O sistema CIAC foi desenhado para funcionar de acordo com o fluxo de uso ilustrado
em linguagem BPM na Figura \ref{fig:funcionamento_sistema}.

\begin{figure}[h]
  \centering
  \includegraphics[width=470px, scale=1]{figuras/funcionamento_sistema}
  \caption{Fluxograma de Funcionamento do Sistema CIAC}
\label{fig:funcionamento_sistema}
\end{figure}

O sistema pode se comportar de duas maneiras diferentes nos veículos que possuem
o CIAC instalado: A Executar a Ultrapassagem e No Sentindo Oposto. Cada uma das duas
está representada na sua respectiva lane do fluxo de uso.

\subsection{Veículo a Executar a Ultrapassagem}
O CIAC é iniciado quando é dada a partida no automóvel. Na lane do veículo a ultrapassar,
há um estado de inércia do sistema, representado pelo evento: Carro em Movimento
na Faixa Direita. Este permanece neste estado até que não exista inteção de
ultrapassagem.

Caso seja identificada a intenção de desligar o sistema, esta é realizada, caso
contrário o CIAC volta para o estado de inércia na faixa direita.

O CIAC identifica através do sistema de sensoriamento se há um carro a frente
para ser ultrapassado. Se existir, o fluxo segue para o próximo estágio, caso
contrário, segue o sistema de Movimento Simples.

Identificado o carro para ser ultrapassado a frente, o CIAC verifica se há a
intenção por parte do motorista de ultrapassá-lo. Existindo, o fluxo do sistema
segue a frente. Caso não seja identificada a inteção, o Movimento simples
é tomado.

No momento que a intação de ultrapassagem é identificada, é enviada uma mensagem
pelo transponder em Broadcast para verificar se há um outro veículo em movimento
no sentido oposto. Não havendo, a ultrapassagem segura é executada.

No caso em que há um carro no sentido oposto, uma troca de mensagens é realizada
via transponder e com base nesses dados, são executados cálculos com o intuito
de verificar se existe a possibilidade de executar a ultrapassagem segura.
Se essa existir, o sistema não transmite nenhum alerta e o motorista pode passar
pelo outro carro. Caso o sistema identifique que não há, um alerta é transmitido
ao condutor do veículo notificando que não é possível continuar com a intenção
de ultrapassagem identificada.

\subsection{Veículo no Sentido Contrário}

O veículo que está nessa lane se comporta como receptor, sendo iniciado quando
a partida é acionada pelo condutor. Este fica aguardando solicitações de
comunicação de outros automóveis através do transponder.

Quando as informações forem
solicitados por qualquer veículo, um conjunto de dados é processado e enviado
para o solicitante tambématravés do transponder.

\section{Cenário Modelo}

\subsection{Caso 1}

Agentes envolvidos: Carro C1 e Carro C3, ambos representam as categorias de
automóveis que se enquadram no uso do CIAC e Carro C2, representa um carro
modelo Gol G3/G4 1.0.

Situação: Carro C2 deseja ultrapassar o Carro C1 e o Carro C3 trafega na mesma
via em sentido oposto como mostra a imagem \ref{fig:caso1} a seguir.

\begin{figure}[h]
  \centering
  \includegraphics[width=400px, scale=1]{figuras/caso1}
  \caption{Demonstração do Caso 1}
\label{fig:caso1}
\end{figure}

Procedimentos:

\begin{enumerate}
  \item O CIAC identificará a intenção de ultrapassagem do condutor do Carro
  C2 que acionará o sistema por completo, monitorando as seguintes situações:
  \begin{itemize}
    \item Acionamento da seta;
    \item Mudança na angulação do volante, utilizando o sensor de rotação PST-360;
    \item Mudança de faixa, utilizando a câmera AWS650;
    \item Quando a distância entre o Carro C2 e o Carro C1 diminuir, utilizando a
    câmera AWS650, o Lidar HDL-64E e o Radar ARS-30X.
  \end{itemize}

  \item Em seguida, o sistema irá verificar se há presença de algum automóvel
  trafegando na mesma via em sentido oposto, fazendo uso da câmera AWS650, do
  Lidar HDL-64E e do Radar ARS-30X;

  \item Havendo a presença de um automóvel, nesse caso o Carro C3, o CIAC identificará:
  \begin{itemize}
    \item Posição geográfica do Carro C3, por meio da utilização do GPS
    A2100-A/B, do Radar ARS-30X e do Lidar HDL-64E;

    \item Velocidade do Carro C3, empregando o par Tranponder-Velocímetro do
    veículo, o Radar ARS-30X e o Lidar HDL-64E.
    \begin{itemize}
      \item Quando o CIAC identificar a intenção do condutor de realizar uma
      ultrapassagem, o transponder emitirá um sinal “questionador” do Carro C2
      para o Carro C3, solicitando, através da emissão de radiofrequência, a
      posição geográfica e a velocidade do Carro C3, dados que serão fornecidos
      pelo GPS e velocímetro do carro, respectivamente;

      \item E simultaneamente, a velocidade do Carro C3, a distância entre os
      carros C2 e C3 e tempo de encontro entre os mesmos estarão sendo aferidos
      com o auxílio do Radar, o qual emite ondas de rádio do Carro C2 que serão
      refletidas pelo Carro C3 e baseado no tempo de ida e volta do sinal
      obtêm-se a distância entre os dois carros, a velocidade do Carro C3 e
      assim, o tempo de encontro do Carro C2 com o Carro C3;

      \item E o Lidar, dispositivos que funciona com a emissão de um laser do
      Carro C2 que será refletido pelo Carro C3 e através do tempo de ida e
      volta desses pulsos é calculada a distância entre os carros C2 e C3.

    \end{itemize}
  \end{itemize}
\end{enumerate}
